# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0

name                    xfishtank
version                 2.5
revision                0
distfiles               ${name}-${version}.tar.gz

homepage                https://sources.debian.org/src/xfishtank/2.5-1/README

master_sites            ${homepage}

categories              x11

# Based on the original Debian port by: kidon@posteo.de
maintainers             nomaintainer 

platforms               darwin freebsd

supported_archs         x86 x86_64

description             Make fish swim in the background of your screen

long_description        There are lots of programs for lots of platforms to make fish swim in the \
                        background of your screen.  This is a modification of an old one called \
                        xfish (also called Xaquarium), that I have added more features to. \
\
                        This version now works on true colour displays.

license                 BSD3CLAUSE
license_file            $(worksrcpath)/LICENSE

uses                    imake xorg
use_xorg                x11 xext
worksrcpath		$(WRKDIR)/$(name)-$(version)

#timestamp              1726130557
checksums               rmd160  c5f23d3e34d7390d4cb0b0a6334103b1b8879812 \
                        sha256  bd8ce3c4e7adb0e62b294de307972c0d5e2a442b094c178a3be084e3e26a08e0 \
                        size    153554

use_configure           no

depends_lib             port:imlib2

patchfiles              c2ps.c.patch \
                        Makefile.patch

XSSHACKSDIR=    bin/xscreensaver-hacks
XSSCONFDIR=     share/xscreensaver/config

pre-build {
        ${CC} $(worksrcdir)/makeh.c -o $(worksrcdir)/makeh
}

destroot {
#	${mkdir} ${STAGEDIR}/${prefix}/${XSSHACKSDIR} ${STAGEDIR}/${prefix}/${XSSCONFDIR}
#	${cp} ${PATCHDIR}/${name}.xml.in ${STAGEDIR}/${prefix}/${XSSCONFDIR}/${name}.xml
#	(cd 11${STAGEDIR}/${prefix}/${XSSHACKSDIR} ; ${LN} -f ${STAGEDIR}/${prefix}/bin/${name} ${STAGEDIR}/${prefix}/${XSSHACKSDIR}/)

                        xinstall -m 0755 ${worksrcpath}/${name} ${destroot}${prefix}/bin

                        xinstall -d ${destroot}${prefix}/share/man/man1
                        xinstall -m 0644 ${worksrcpath}/${name}.1 ${destroot}${prefix}/share/man/man1
}
