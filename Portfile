# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0

name                    xfishtank
version                 2.5
revision                0
distfiles               ${name}-${version}.tar.gz

homepage                https://sources.debian.org/src/xfishtank/${version}-1/README

master_sites            DEBIAN 
#MASTER_SITE_SUBDIR=	pool/main/x/xfishtank/
#DISTNAME=	xfishtank_2.5.orig

categories              x11

# Based on the original Debian port by: kidon@posteo.de
maintainers             nomaintainer

platforms               darwin freebsd

supported_archs         x86 x86_64

description             Make fish swim in the background of your screen

long_description        There are lots of programs for lots of platforms to make fish swim in the \
                        background of your screen.  This is a modification of an old one called \
                        xfish (also called Xaquarium), that I have added more features to. \
\
                        This version now works on true colour displays.

license                 BSD3CLAUSE, see LICENSE file

use_xmkmf               yes

#uses                    xorg
#use_xorg                x11 xext
#worksrcpath             $(wrkdir)/$(name)-$(version)

#timestamp              1726130557
checksums               rmd160  c5f23d3e34d7390d4cb0b0a6334103b1b8879812 \
                        sha256  bd8ce3c4e7adb0e62b294de307972c0d5e2a442b094c178a3be084e3e26a08e0 \
                        size    153554

use_configure           no

depends_lib             port:imlib2

patchfiles              c2ps.c.patch \
                        Makefile.patch

set xsshacksdir         bin/xscreensaver-hacks
set xssconfdir          share/xscreensaver/config

pre-build {
                        ${CC} $(worksrcpath)/makeh.c -o $(worksrcpath)/makeh
}

destroot {
                        mkdir ${destroot}/${prefix}${xsshacksdir} ${destroot}${prefix}/${xssconfdir}
                        cp ${filespath}/${name}.xml.in ${destroot}${prefix}/${xssconfdir}/${name}.xml
                        (cd ${destroot}${prefix}/${xsshacksdir} ; ln -f ${destroot}${prefix}/bin/${name} ${destroot}${prefix}/${xsshacksdir}/)

}
